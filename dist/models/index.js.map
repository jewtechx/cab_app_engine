{"version":3,"file":"index.js","sourceRoot":"/","sources":["models/index.ts"],"names":[],"mappings":";;;AAAA,uCAAmC;AAEnC,+DAA+B;AAE/B,OAAO;AACP,+DAA+B;AAE/B,OAAO;AACP,4DAA4B;AAO5B,SAA8B,MAAM,CAAC,MAAoB;;QACvD,IAAI;YACF,MAAM,IAAA,kBAAO,EAAC,MAAM,CAAC,GAAG,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;YAC/C,aAAG,CAAC,IAAI,CAAC,oCAAoC,CAAC,CAAC;YAE/C,MAAM,cAAI,CAAC,gBAAgB,EAAE,CAAC;YAC9B,MAAM,eAAK,CAAC,gBAAgB,EAAE,CAAC;YAE/B,OAAO;gBACL,IAAI,EAAJ,cAAI;gBACJ,KAAK,EAAL,eAAK;aACN,CAAC;SACH;QAAC,OAAO,CAAC,EAAE;YACV,MAAM,IAAI,KAAK,CAAC,wCAAwC,CAAC,EAAE,CAAC,CAAC;SAC9D;IACH,CAAC;CAAA;AAfD,yBAeC","sourcesContent":["import { connect } from 'mongoose';\nimport { Config } from '../config';\nimport log from '../utils/log';\n\n// user\nimport User from './user/user';\n\n//image\nimport Image from './image';\n\nexport interface IModels {\n  User: typeof User;\n  Image: typeof Image\n}\n\nexport default async function initDB(config: Config['db']): Promise<IModels> {\n  try {\n    await connect(config.uri, { autoIndex: true });\n    log.info('Connected to database successfully');\n\n    await User.createCollection();\n    await Image.createCollection();\n\n    return {\n      User,\n      Image\n    };\n  } catch (e) {\n    throw new Error(`Error while connecting to database : ${e}`);\n  }\n}"]}